<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./stylesheets/style.css" />
        <link rel="icon" href="./images/icon.png" />
        <script src="https://kit.fontawesome.com/9ee0ab41a9.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
        <script src="./javascripts/manage-clubs.js" defer></script>
        <script src="./components/header.js"></script>
        <script src="./components/nav.js"></script>
        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#455db2">
        <title>CLUBER - Manage Clubs</title>
    </head>
    <body>
        <div id="app">
            <header-component></header-component>
            <div id="main-body">
                <nav-component></nav-component>
                <main>
                    <h1 class="page-title">Manage Clubs</h1>
                    <div class="right-aligned">
                        <button type="button" id="add-club-button" v-on:click="showAddModal()">
                            <i class="fa fa-plus fa-regular"></i> Add Club
                        </button>
                    </div>
                    <div id="clubs-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Club ID</th>
                                    <th class="hidden-column-550">Color</th>
                                    <th>Name</th>
                                    <th class="hidden-column-550">Club Managers</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody v-for="club in clubs">
                                <tr>
                                    <td>{{club.id}}</td>
                                    <td class="hidden-column-550" v-bind:style="{'background-color': club.color}"></td>
                                    <td>{{club.name}}</td>
                                    <td class="hidden-column-550">{{club.managers}}</td>
                                    <td>
                                        <i class="fa fa-solid fa-pen edit" v-on:click="showEditModal(club.id)"></i>
                                        <i class="fa fa-solid fa-trash delete" v-on:click="delete_modal_visible = true; selected_club = club.id"></i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="delete-club-modal" class="modal" v-if="delete_modal_visible">
                        <div class="modal-content">
                            <div class="right-aligned">
                                <i class="fa fa-solid fa-xmark close close-icon" v-on:click="delete_modal_visible = false; selected_club = -1"></i>
                            </div>
                            <div>
                                <h2>Delete Club</h2>
                            </div>
                            <div class="dialog-text">
                                <p>Are you sure you want to delete club <b>{{getSelectedClub().name}}</b>?</p>
                            </div>
                            <div class="right-aligned">
                                <button type="button" class="cancel-button close" v-on:click="delete_modal_visible = false; selected_club = -1">Cancel</button>
                                <button type="button" class="delete-button" v-on:click="deleteClub()">Delete</button>
                            </div>
                        </div>
                    </div>
                    <div id="edit-club-modal" class="modal" v-if="edit_modal_visible">
                        <div class="modal-content">
                            <div class="right-aligned">
                                <i class="fa fa-solid fa-xmark close close-icon" v-on:click="edit_modal_visible = false; selected_club = -1"></i>
                            </div>
                            <div>
                                <h2>Edit Club</h2>
                            </div>
                            <div class="dialog-text">
                                <p>You are editting club <b>{{getSelectedClub().name}}</b>.</p>
                            </div>
                            <div>
                                <label for="name-input">Name</label>
                                <input id="name-input" type="text" v-model="edit_name">
                                <label for="color-input">Color</label>
                                <input id="color-input" type="color" v-model="edit_color">
                                <label for="description-input">Description</label>
                                <textarea id="description-input" v-model="edit_description" rows="5"></textarea>
                                <label>Managers</label>
                                <div v-for="(manager, index) in edit_managers">
                                    <div class="textfield-w-remove">
                                        <input type="text" disabled v-bind:value="manager.username">
                                        <i class="fa fa-solid fa-xmark close close-icon" title="Remove manager" v-on:click="removeManager(index)"></i>
                                    </div>
                                </div>
                                <div class="select-w-add" v-if="manager_dropdown_visible">
                                    <select v-model="new_manager">
                                        <option v-for="manager in available_managers">{{manager.username}}</option>
                                    </select>
                                    <i class="fa fa-solid fa-xmark close close-icon" title="Close" v-on:click="manager_dropdown_visible = false; new_manager = ''"></i>
                                </div>
                                <div>
                                    <button type="button" class="add-manager-button" v-bind:class="{'green': new_manager !== ''}" v-on:click="showManagerDropdownOrAddManager()">
                                        <i class="fa fa-plus fa-regular"></i> Add Manager
                                    </button>
                                </div>
                        </div>
                        <div class="right-aligned">
                            <button type="button" class="cancel-button close" v-on:click="edit_modal_visible = false; selected_club = -1">Cancel</button>
                            <button type="button" class="save-button" v-on:click="editClub()">Save</button>
                        </div>
                    </div>
                </div>
                <div id="add-club-modal" class="modal" v-if="add_modal_visible">
                    <div class="modal-content">
                        <div class="right-aligned">
                            <i class="fa fa-solid fa-xmark close close-icon" v-on:click="add_modal_visible = false"></i>
                        </div>
                        <div>
                            <h2>Add Club</h2>
                        </div>
                        <div>
                            <label for="new-name-input">Name</label>
                            <input id="new-name-input" type="text" v-model="edit_name">
                            <label for="new-color-input">Color</label>
                            <input id="new-color-input" type="color" v-model="edit_color">
                            <label for="new-description-input">Description</label>
                                <textarea id="new-description-input" v-model="edit_description" rows="5"></textarea>
                            <label>Managers</label>
                            <div v-for="(manager, index) in edit_managers">
                                <div class="textfield-w-remove">
                                    <input type="text" disabled v-bind:value="manager.username">
                                    <i class="fa fa-solid fa-xmark close close-icon" title="Remove manager" v-on:click="removeManager(index)"></i>
                                </div>
                            </div>
                            <div class="select-w-add" v-if="manager_dropdown_visible">
                                <select v-model="new_manager">
                                    <option v-for="manager in available_managers">{{manager.username}}</option>
                                </select>
                                <i class="fa fa-solid fa-xmark close close-icon" title="Close" v-on:click="manager_dropdown_visible = false; new_manager = ''"></i>
                            </div>
                                <button type="button" class="add-manager-button" v-bind:class="{'green': new_manager !== ''}" v-on:click="showManagerDropdownOrAddManager()">
                                    <i class="fa fa-plus fa-regular"></i> Add Manager
                                </button>
                            </div>
                            <div class="right-aligned">
                                <button type="button" class="cancel-button close" v-on:click="add_modal_visible = false">Cancel</button>
                                <button type="button" class="save-button" v-on:click="addClub()">Save</button>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </body>
</html>
